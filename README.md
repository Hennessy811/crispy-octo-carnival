# Кабинет юридического лица

Чтобы запустить проект на локальной машине используйте

`yarn` для установки зависимостей

`yarn start` для запуска проекта

По умолчанию проект будет запущен на порту 3000.

`yarn test` для прогона имеющихся тестов

Чтобы собрать production сборку, используйте `yarn build`

## Сборка и деплой

В локальной разработке используется .env, как пример, .env.example

Для конфигурирования API после сборки в корень билда, рядом с получившимся `index.html` необходимо положить файл `env.js`, который содержит конфиги конкретной инсталляции.

**Важно**: все инсталляции одного билда должны иметь одинаковый относительный путь до рута. Этот параметр задается в переменных окружения **на этапе сборки**.

Пример содержания такого конфига:

`
window['__INSTANCE_ENV_PROPS__'] = {
  REACT_APP_HOST_NAME: 'http://localhost:3000/',
  REACT_APP_LOGIN_URL: 'https://parkingqa2.fitdev.ru/legalcabinet/api/v1/auth/login',
  REACT_APP_URL: 'https://parkingqa2.fitdev.ru/legalcabinet/api/v1',
};
`

Итого, на этапе сборки в переменных окружения важен только параметр `REACT_APP_SUB_DOMAIN_URL`, остальное задается в `env.js`

## Процесс разработки

Проект использует:

- Create-react-app
- react-hot-loader
- TypeScript
- Redux
- RxJS
- SCSS
- Ant Design
- Storybook

### codegen (опционально)

`npm i -g yo` - yeoman generator

`npm i -g generator-rs` - генератор компонентов, как в проекте

Например, хотим сделать общий компонент-карточку:

в папке `src/shared/components` призываем `yo rs:c`. Отвечаем `Card` и `Yes`. Будет создана папка `./Card` с файлами `Card.tsx` с базовым компонентом, `Card.module.scss` и `index.ts` с экспортом по умолчанию.

## Договоренности по code style

#### Общие

![](https://cs7.pikabu.ru/post_img/2018/08/05/10/1533486834170014635.jpg)

0. Все компоненты - функциональные
1. Компоненты не должны быть большими (>150 строк вместе с импортами)
1. Отдельные экраны, разделяемые роутами находятся в папке `src/scenes`
1. Все внутренние компоненты экрана лежат в папке `/components` данного экрана
1. Компоненты, которые имеет смысл переиспользовать, лежат в `src/shared/components`. Там же переописанные Ant-компоненты

1. Все поля интерфейсов имеют JSDoc описания
1. Все интерфейсы, относящиеся к потоку данных между приложением и сервером расположены в соответствующем редьюсере

1. Тесты для кнопок/иконок/прочей лабуды в виде прокидывания пропсов дальше использовать запрещено
1. При необходимости, в первую очередь тесты пишутся для ключевых узлов приложения, имеющим отношение к изменению данных
